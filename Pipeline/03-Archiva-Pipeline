node {

stage('Git - Test - CheckOut') {
  git branch: 'main', url: 'https://github.com/amitvashisttech/devops-m-benz-27-Jan-2022.git'
} 

dir('04-App-Code/petclinic-code') {

stage('Maven Clean') {
  sh 'mvn clean'
}

stage('Maven Compile') {
  sh 'mvn compile'
} 

stage('Maven Test') {
  sh 'mvn test'
}

stage('Maven Package') {
  sh 'mvn package'
}

stage('Archive Artifacts') {
  archiveArtifacts artifacts: 'target/petclinic.war', followSymlinks: false
}
}
    
}


